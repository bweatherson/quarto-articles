<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.479">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Weatherson">
<meta name="dcterms.date" content="2003-07-01">
<meta name="description" content="Nick Bostrom argues that if we accept some plausible assumptions about how the future will unfold, we should believe we are probably not humans. The argument appeals crucially to an indifference principle whose content is unclear. I set out four possible interpretations of the principle, none of which can be used to support Bostrom’s argument. On the first two interpretations the principle is false; on the third it does not entail the conclusion; and on the fourth it only entails the conclusion given an auxiliary hypothesis which we have no reason to believe.">

<title>Online Articles - Brian Weatherson - Are You a Sim?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="stylesheet" href="https://use.typekit.net/uzz2drx.css">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Online Articles - Brian Weatherson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://brian.weatherson.org"> <i class="bi bi-mortarboard" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://bsky.app/profile/bweatherson.bsky.social"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Are You a Sim?</h1>
                  <div>
        <div class="description">
          <p>Nick Bostrom argues that if we accept some plausible assumptions about how the future will unfold, we should believe we are probably not humans. The argument appeals crucially to an indifference principle whose content is unclear. I set out four possible interpretations of the principle, none of which can be used to support Bostrom’s argument. On the first two interpretations the principle is false; on the third it does not entail the conclusion; and on the fourth it only entails the conclusion given an auxiliary hypothesis which we have no reason to believe.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">epistemology</div>
                <div class="quarto-category">notes</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="http://brian.weatherson.org">Brian Weatherson</a> </p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Michigan
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 1, 2003</p>
      </div>
    </div>
    
      
      <div>
      <div class="quarto-title-meta-heading">Doi</div>
      <div class="quarto-title-meta-contents">
        <p class="doi">
          <a href="https://doi.org/10.1111/1467-9213.00323">10.1111/1467-9213.00323</a>
        </p>
      </div>
    </div>
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#first-interpretation" id="toc-first-interpretation" class="nav-link active" data-scroll-target="#first-interpretation"><span class="header-section-number">0.1</span> First Interpretation</a></li>
  <li><a href="#second-interpretation" id="toc-second-interpretation" class="nav-link" data-scroll-target="#second-interpretation"><span class="header-section-number">0.2</span> Second Interpretation</a></li>
  <li><a href="#third-interpretation" id="toc-third-interpretation" class="nav-link" data-scroll-target="#third-interpretation"><span class="header-section-number">0.3</span> Third Interpretation</a></li>
  <li><a href="#fourth-interpretation" id="toc-fourth-interpretation" class="nav-link" data-scroll-target="#fourth-interpretation"><span class="header-section-number">0.4</span> Fourth Interpretation</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">0.5</span> Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="are-you-a-sim.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>In Will Wright’s delightful game <a href="http://thesims.ea.com/"><em>The Sims</em></a>, the player controls a neighbourhood full of people, affectionately called sims. The game has no scoring system, or winning conditions. It just allows players to create, and to some extent participate in, an interesting mini-world. Right now the sims have fairly primitive psychologies, but we can imagine this will be improved as the game evolves. The game is very popular now, and it seems plausible that it, and the inevitable imitators, will become even more popular as its psychological engine becomes more realistic. Since each human player creates a neighbourhood with many, many sims in it, in time the number of sims in the world will vastly outstrip the number of humans.</p>
<aside>
<p>Published in <em>Philosophical Quarterly</em> 53: 425-431.</p>
Picture by <a href="https://www.flickr.com/photos/52635109@N00">Elven*Nicky</a> via <a href="https://search.creativecommons.org/photos/c5f0026d-5b24-4e8e-9e0a-055a8e7f9cc8">Creative Commons</a>
</aside>
<p>Let’s assume that as the sims become more and more complex, they will eventually acquire conscious states much like yours or mine. I do not want to argue for or against this assumption, but it seems plausible enough for discussion purposes. I’ll reserve the term Sim, with a capital S, for a sim that is conscious. By similar reasoning to the above, it seems in time the number of Sims in the world will far outstrip the number of humans, unless humanity either (a) stops existing, or (b) runs into unexpected barriers to computing power or (c) loses interest in these kinds of simulators. I think none of these is likely, so I think that over time the ratio of Sims to humans will far exceed 1:1.</p>
<p>Nick <span class="citation" data-cites="Bostrom2003">Bostrom (<a href="#ref-Bostrom2003" role="doc-biblioref">2003</a>)</span> argues that given all that, we should believe that we are probably Sims. Roughly, the argument is that we know that most agents with conscious states somewhat like ours are Sims. And we don’t have any specific evidence that tells on whether we are a Sim or a human. So the credence we each assign to <em>I’m a Sim</em> should equal our best guess as to the percentage of human-like agents that are Sims, which is far above <span class="math inline">\(\frac{1}{2}\)</span>. As Glenn Reynolds put it, “Is it live, or is it Memorex? Statistically, it’s probably Memorex. Er, and so are you, actually.”<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> (Is it worrying that we used the assumption that we are human to generate this statistical argument? Not necessarily; if we are Sims then the Sims:humans ratio is probably even higher, so what we know is a lower bound on the proportion of human-like agents that are Sims.) Less roughly, the argument appeals crucially to the following principle:</p>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;<a href="http://www.instapundit.com/archives/003465.php#003465">Link</a>. Reynolds’s comment wasn’t directly about Bostrom, but it bore the ancestral of the relation <em>refers</em> to Bostrom’s paper.</p></li></div><dl>
<dt>(#)</dt>
<dd>
<p><em>Cr</em>(<em>Sim</em>&nbsp;&nbsp;<em>f<sub>Sim</sub></em>&nbsp;=&nbsp;<em>x</em>)&nbsp;=&nbsp;<em>x</em></p>
</dd>
</dl>
<p>Here <em>Cr</em> is a rational credence function. I will adopt David Lewis’s theory of <em>de se</em> belief, and assume that the credence function is defined over properties, rather than propositions <span class="citation" data-cites="Lewis1979b">Lewis (<a href="#ref-Lewis1979b" role="doc-biblioref">1979</a>)</span>. Whenever I use a term that normally stands for a proposition inside the scope of <em>Cr</em>, it stands for the property of being in a world where that proposition is true. So <em>f<sub>Sim</sub></em>&nbsp;=&nbsp;<em>x</em> stands for the property of being in a world where 100<em>x</em>% of the human-like agents are Sims.</p>
<p>As Bostrom notes, the main reason for believing (#) is that it is an instance of a plausible general principle, which I’ll call (##).</p>
<dl>
<dt>(##)</dt>
<dd>
<p><span class="math inline">\({\forall}{\Phi}\)</span>: <em>Cr</em>(<span class="math inline">\({\Phi}\)</span>&nbsp;&nbsp;<em>f</em><sub><span class="math inline">\({\Phi}\)</span></sub>&nbsp;=&nbsp;<em>x</em>)&nbsp;=&nbsp;<em>x</em></p>
</dd>
</dl>
<p>Bostrom does not formulate this more general principle, but it is clear that he intends something like it to be behind his argument, for many of the defences of (#) involve substituting some other property in place of <em>Sim</em> in statements like (#). So I will focus here on whether anything like (##) is plausibly true, and whether it supports (#). There are many ways we could interpret (##), depending on whether we take <em>Cr</em> to be a rational agent’s current credences, or in some sense the prior credences before they are affected by some particular evidence, and on whether we take the quantifier to be restricted or unrestricted. Five particular interpretations stand out as being worth considering. None of these, however, provides much reason to believe (#), at least on the reading Bostrom wants to give it. In that reading (#) the credence function represents the current credences of an agent much like you or me. If (#) isn’t interpreted that way, it can’t play the dialectical role Bostrom wants it to play. On two of the interpretations, (##) is false, on two others it may be true but clearly does not entail (#), and on the fifth it only entails (#) if we make an auxiliary assumption which is far from obviously true.</p>
<p>For ease of exposition, I will assume that <em>Cr</em> describes in some way the credences at some time of a particular rational human-like agent, Rat, who is much like you or me, except that she is perfectly rational.</p>
<section id="first-interpretation" class="level3" data-number="0.1">
<h3 data-number="0.1" class="anchored" data-anchor-id="first-interpretation"><span class="header-section-number">0.1</span> First Interpretation</h3>
<p><em>Cr</em> in (##) measures Rat’s current credences, and the quantifier in (##) is unrestricted. On this interpretation, (##) is clearly false, as Bostrom notes. Rat may well know that the proportion of human-like agents that are like spaghetti westerns is rather low, while rationally being quite confident that she likes spaghetti westerns. For any property <span class="math inline">\({\Phi}\)</span> where Rat has some particular information about whether he is one of the <span class="math inline">\({\Phi}\)</span>s or not, that information, and not general facts about the proportion of human-like agents that are <span class="math inline">\({\Phi}\)</span>, can (indeed should) guide Rat’s credences. So those substitution instances of (##) are false.</p>
</section>
<section id="second-interpretation" class="level3" data-number="0.2">
<h3 data-number="0.2" class="anchored" data-anchor-id="second-interpretation"><span class="header-section-number">0.2</span> Second Interpretation</h3>
<p>Just like the first interpretation, except that we restrict the quantifier range so that it only ranges over properties such that Rat does not know whether she possesses them. This interpretation seems to be hinted at by Bostrom when he says, “the bland indifference principle expressed by (#) prescribes indifference only between hypotheses about which observer you are, when you have no information about which of these observers you are.” Even given this restriction, (##) is still false, as the following example shows.</p>
<p>Assume that Rat knows that <em>f<sub>Sim</sub></em> &gt; 0.9, which Bostrom clearly takes to be consistent with rationality. And assume also that Rat, being a normal human-like agent, knows some fairly specific, and fairly distinctive facts about her conscious life. If Rat is anything like you or me, she will have experiences that he can be fairly sure are unique to her. Last night, for instance, while Rat was listening to Go-Betweens bootlegs, watching baseball, drinking beer, rocking in his rocking chair and thinking about Bostrom’s simulation argument, she stubbed her toe in a moderately, but not excessively, painful way. Few people will have done all these things at once, and none in quite that way. Let <em>C</em> be the property of ever having had an experience almost just like that. Rat knows he is a <em>C</em>. She is very confident, though not certain, that she is the only human-like <em>C</em>. Let a suman be the property of being <em>C</em> and human, or not-<em>C</em> and a Sim. For much of the paper we’re going to be concerned with the following two properties.</p>
<blockquote class="blockquote">
<p><span class="math inline">\(x\)</span> is a <strong>suman</strong> =<sub>df</sub> <span class="math inline">\(x\)</span> is a human <span class="math inline">\(C\)</span> or a Sim who is not a <span class="math inline">\(C\)</span>.</p>
<p><span class="math inline">\(x\)</span> is a <strong>him</strong> =<sub>df</sub> <span class="math inline">\(x\)</span> is a Sim <span class="math inline">\(C\)</span> or a human who is not a <span class="math inline">\(C\)</span>.</p>
</blockquote>
<p>We are following Bostrom in assuming that Rat does not know whether she is a Sim so she does not know whether she is a suman. But given that almost no one is <em>C</em>, it follows that <em>f<sub>suman</sub></em>&nbsp;<span class="math inline">\({\approx}\)</span>&nbsp;<em>f<sub>Sim</sub></em>. Hence <em>f<sub>suman</sub></em>&nbsp;&gt; 0.85, for if it is less than <em>f<sub>Sim</sub></em>, it is not much less. But if <em>Cr</em>(a suman)&nbsp;&gt;&nbsp;0.85, and <em>Cr</em>(<em>Sim</em>)&nbsp;&gt;&nbsp;0.9, and Rat is coherent, it follows that <em>Cr</em>(<em>C</em>)&nbsp;&lt;&nbsp;0.25. But we assumed that Rat knew that she was a <em>C</em>, and however knowledge and credence are to be connected, it is inconceivable that one could know something while one’s credence in it is less than <span class="math inline">\(\frac{1}{4}\)</span>. Hence it must be false that <em>Cr</em>(<em>C</em>)&nbsp;&lt;&nbsp;<span class="math inline">\(\frac{1}{4}\)</span>, but we inferred that from given facts about the story and (##), as interpreted here. Hence (##), as interpreted here, is false.</p>
</section>
<section id="third-interpretation" class="level3 page-columns page-full" data-number="0.3">
<h3 data-number="0.3" class="anchored" data-anchor-id="third-interpretation"><span class="header-section-number">0.3</span> Third Interpretation</h3>
<p>One natural response ot the previous objection is that there shoul dbe some way of restricting (##) so that it does not apply to properties like being a suman. Intuitively, the response is that even though Rat doesn’t know whether she is a suman, she knows something that is relevant to whether she is a suman, namely that she is a <span class="math inline">\(C\)</span>. The problem with this response is that any formal restriction on (##) that implements this intuition ends up giving us a version so weak that it doesn’t entail (#).</p>
<p>The idea is that what went wrong in the previous case is that even though Rat does not know whether she is a suman, she knows something relevant to this. In particular, she knows that if she is a suman, she is one of the sumans that is human, rather than one of the ones that is a Sim. Our third interpretation avoids the difficulties this raises by restricting the quantifier in (##) even further. Say that a property <span class="math inline">\({\Phi}\)</span> is in the domain of the quantifier iff (a) Rat does not know whether she is <span class="math inline">\({\Phi}\)</span>, and (b) there is no more specific property <span class="math inline">\({\Phi}\)</span><span class="math inline">\(^\prime\)</span> such that Rat knows that if she is <span class="math inline">\({\Phi}\)</span>, then she is <span class="math inline">\({\Phi}\)</span><span class="math inline">\(^\prime\)</span>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> This will rule out the applicability of (##) to properties like a suman. Unfortunately, it will also rule out the applicability of (##) to properties like <em>being a Sim</em>. For Rat knows that if she is a Sim, then she is a Sim that is also a <em>C</em>. So now (##) doesn’t entail (#).</p>
<div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;I think it is this interpretation of (##) that Adam Elga implicitly appeals to in his solution to the Sleeping Beauty problem <span class="citation" data-cites="Elga2000-ELGSBA">Elga (<a href="#ref-Elga2000-ELGSBA" role="doc-biblioref">2000</a>)</span>.</p></li></div><p>This kind of problem will arise for any attempt to put a purely formal restriction on (##). The problem is that, as Goodman noted in a quite different context <span class="citation" data-cites="Goodman1955">(<a href="#ref-Goodman1955" role="doc-biblioref">Goodman 1955</a>)</span>, there is no formal distinction between the ‘normal’ properties, being a human and being a sim, and the ‘deviant’ properties, being a suman and being a him. The following four biconditionals are all conceptual truths, and hence must all receive credence 1.</p>
<p>If the obvious truth of (1a) implies that Rat cannot apply (##) to the property o being a suman once she knows that she is a <span class="math inline">\(C\)</span>, for (1a) makes that evidence look clrarly relevant to the issue of whether she is suman, then similar reasoning suggests that the obvious truth of (2a) implies that Rat cannot apply (##) to the properties of being a human once she knows that she is a <span class="math inline">\(C\)</span>, for (2a) makes that evidence look clearly relevant to the issue of whether she is human. The point is that a restriction on (##) that is to deliver (#) must fine some epistemologically salient distinction between the property of being human and the property of being suman if it is to rule out one application of (##) without ruling out the other, and if we only consider formal constraints, we won’t find such a restriction. Our final attempt to justify (#) from something like (##) attempts to avoid this problem by appealing directly to the nature of Rat’s evidence.</p>
</section>
<section id="fourth-interpretation" class="level3 page-columns page-full" data-number="0.4">
<h3 data-number="0.4" class="anchored" data-anchor-id="fourth-interpretation"><span class="header-section-number">0.4</span> Fourth Interpretation</h3>
<p>The problems with the three interpretations of (##) so far have been that they applied <em>after</em> Rat found out something distinctive about herself, that she was a <em>C</em>. Perhaps (##) is really a constraint on <em>prior</em> credence functions. <em>A priori</em>, Rat’s credences should be governed by an unrestricted version of (##). We then have the following argument for (#). (As noted above, (#) is a constraint on current credences, so it is not immediately entailed by a constraint on prior credences such as (##) under its current interpretation.)</p>
<dl>
<dt>P1</dt>
<dd>
<p><em>A priori</em>, Rat’s conditional credence in her being a Sim given that <em>f<sub>Sim</sub></em> is <em>x</em> is <em>x</em>.</p>
</dd>
<dt>P2</dt>
<dd>
<p>All of Rat’s evidence is probabilistically independent of the property of being a Sim.</p>
</dd>
<dt>C</dt>
<dd>
<p>Rat’s current conditional credence in her being a Sim given that <em>f<sub>Sim</sub></em> is <em>x</em> is <em>x</em>.</p>
</dd>
</dl>
<p>This interpretation may be reasonably faithful to what Bostrom had in mind. The argument just sketched looks similar enough to what he hints at in the following quote: “More generally, if we knew that a fraction <em>x</em> of all observers with human-type experiences live in simulations, and we don’t have any information that indicate that our own particular experiences are any more or less likely than other human-type experiences to have been implemented <em>in vivo</em> rather than <em>in machina</em>, then our credence that we are in a simulation should equal <em>x</em>.” So it’s not unreasonable to conclude that he is committed to P2, and intends it to be used in the argument that you should give high credence to being a Sim.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Further, this version of (##), where it is restricted to prior credences, does not look unreasonable. So if P2 is true, an argument for (#) might just succeed. So the issue now is just whether P2 is true.</p>
<div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;Jamie Dreier pointed out to me that what Bostrom says here is slightly more complicated than what I, hopefully charitably, attribute to him. A literal reading of Bostrom’s passage suggests he intends the following principle.</p>
<p>&nbsp;&nbsp;<span class="math inline">\({\forall}\)</span><em>e</em>: <em>Cr</em>(<em>e</em>&nbsp;&nbsp;<em>Human</em>)&nbsp;- <em>Cr</em>(<em>e</em>&nbsp;&nbsp;<em>Sim</em>)&nbsp;= <em>Cr</em>(<em>e</em>&nbsp;&nbsp;<em>Human</em>)&nbsp;- <em>Cr</em>(<em>e</em>&nbsp;&nbsp;<em>Sim</em>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(B)</p>
<p>The quantifier here ranges over possible experiences <em>e</em>, <em>e</em> is the actual experience Rat has, and <em>Cr</em> is the credence function at the ‘time’ when Rat merely knows that he is human-like and <em>f<sub>Sim</sub></em> is greater than 0.9. I suggested a simpler assumption:</p>
<p>&nbsp;&nbsp;<em>Cr</em>(<em>Human</em>&nbsp;&nbsp;<em>e</em>)&nbsp;=&nbsp;<em>Cr</em>(<em>Sim</em>&nbsp;&nbsp;<em>e</em>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(I)</p>
<p>Bostrom needs something a little stronger than (I) to get his desired conclusion, for he needs this to hold not just for Rat’s experience <em>e</em>, but for your experience and mine as well. But we will not press that point. Given that point, though, (I) is all he needs. And presumably the reason he adopts (B) is because it looks like it entails (I). And indeed it does entail (I) given some fairly innocuous background assumptions.</p></li></div><p>Why might we reject P2? Any of the following three reasons might do. First, Rat’s evidence might be constituted by more than her conscious phenomenal states. This reply has an externalist and an internalist version. On the externalist version, Rat’s perceptual evidence is constituted in part by the objects she is perceiving. Just as seeing a dagger and hallucinating a dagger provide different evidence, so does seeing a dagger and sim-seeing a sim-dagger. For reasns Williamson notes, a Sim may not know that she has different evidence to someone seeing a dagger when she sim-sees a sim-dagger, but that does not imply that she does not have different evidence unless one also assumes, implausibly, that agents know exactly what their evidence is <span class="citation" data-cites="Williamson2000-WILSAE-2">Williamson (<a href="#ref-Williamson2000-WILSAE-2" role="doc-biblioref">2000</a>)</span>. On the internalist version, our evidence is constituted by our sensory irritations, just as Quine said it is <span class="citation" data-cites="Quine1973">(<a href="#ref-Quine1973" role="doc-biblioref">Quine 1973</a>)</span>. If Rat’s evidence includes the fact that her eyes are being irritated thus-and-so, his credence conditional on that that she is human should be 1, for if she were a Sim she could not have this evidence because she would not have eyes. She may, depending on the kind of Sim she is, have sim-eyes, but sim-eyes are not eyes. So Bostrom needs an argument that evidence supervenes on conscious experiences, and he doesn’t clearly have one. This is not to say that no such argument could exist. For example, Laurence BonJour provides some intriguing grounds for thinking that our fundamental evidence does consist in certain kinds of conscious states, namely occurrent beliefs <span class="citation" data-cites="BonJour1999">(<a href="#ref-BonJour1999" role="doc-biblioref">BonJour 1999</a>)</span>, but we’re a long way from knowing that the supervenience claims holds. And if the supervenience claim does not hold, then even if Sims and humans have the same kind of <em>experiences</em>, they may not have the same kind of <em>evidence</em>. And if that is true, it is open to us to hold that Rat’s non-experiential evidence entails that she is not a Sim (as both Williamson and Quine suggest), so her evidence will not be independent of the question of whether she is a Sim.</p>
<p>Secondly, even if every one of Rat’s experiences is probabilistically independent of the hypothesis that she is a Sim, that doesn’t give us a sufficient reason to believe that her total evidence is so independent. Just because <em>e</em><sub>1</sub> and <em>e</em><sub>2</sub> are both probabilistically independent of <em>H</em>, the conjunction <em>e</em><sub>1</sub>&nbsp;<span class="math inline">\({\wedge}\)</span>&nbsp;<em>e</em><sub>2</sub> might not be independent of <em>H</em>. So possibly our reasons for accepting P2 involve a tacit scope confusion.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;Thanks to Jamie Dreier for reminding me of this point.</p></li></div><p>Finally, we might wonder just why we’d even think that Rat’s evidence is probabilistically independent of the hypothesis that she is human. To be sure, her evidence does not entail that she is human. But that cannot be enough to show that it is probabilistically independent. For the evidence also does not entail that she is suman. And if P2 is true, then the evidence must have quite a bit of bearing on whether she is suman. For Rat’s prior credence in being suman is above 0.9 but apparently her posterior credence in it should be below 0.15. So the mere fact that the evidence does not entail that she is human cannot show that it is probabilistically independent of her being human, for the same reasoning would show it is probabilistically independent of his being suman.</p>
<p>More generally, we still need a distinction here between the property of being human and the property of being suman that shows why ordinary evidence should be independent of the first property but not the second. One might think the distinction can reside in the fact that <em>being human</em> is a natural property, while <em>being suman</em> is gruesome. The lesson of Goodman’s riddle of induction is that we have to give a privileged position in our epistemic framework to natural properties like <em>being human</em>, and this explains the distinction. This response gets the status of privileged and gruesome properties back-to-front. The real lesson of Goodman’s riddle is that credences in hypotheses involving natural properties should be distinctively <em>sensitive</em> to new evidence. Our evidence should make us quite confident that all emeralds are green, while giving us little reason to think that all emeralds are grue. What P2 says is that a rather natural hypothesis, that Rat is human, is <em>insensitive</em> to all the evidence Rat has, while a rather gruesome hypothesis, that Rat is suman, is <em>sensitive</em> to this evidence. The riddle of induction gives us no reason to believe that should happen.</p>
<p>It seems, though this is a little speculative, that the only reason for accepting P2 involves a simple fallacy. It is true that we have no reason to think that some evidence, say <em>C</em>, is more or less likely given that Rat is human rather than a Sim. But from this we should <em>not</em> conclude that we <em>have</em> a reason to think it is not more or less likely given that Rat is human rather than a Sim, which is what P2 requires. Indeed, drawing this kind of conclusion will quickly lead to a contradiction, for we can use the same ‘reasoning’ to conclude that we have a reason to think her evidence is not more or less likely given that Rat is a suman rather than a him.</p>
</section>
<section id="conclusion" class="level3" data-number="0.5">
<h3 data-number="0.5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">0.5</span> Conclusion</h3>
<p>Nothing I have said here implies that Rat should have a high credence in her being human. But it does make one argument that she should not have a high credence in this look rather tenuous. Further, it is quite plausible that if there is no good reason not to give high credence to a hypothesis, then it is rationally permissible to give it such a high credence. It may not be rationally mandatory to give it such a high credence, but it is permissible. If Rat is very confident that she is human, even while knowing that most human-like beings are Sims, she has not violated any norms of reasoning, and hence is not thereby irrational. In that respect she is a bit like you and me.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-BonJour1999" class="csl-entry" role="listitem">
BonJour, Laurence. 1999. <span>“Foundationalism and the External World.”</span> <em>Philosophical Perspectives</em> 13: 229–49. <a href="https://doi.org/10.1111/0029-4624.33.s13.11">https://doi.org/10.1111/0029-4624.33.s13.11</a>.
</div>
<div id="ref-Bostrom2003" class="csl-entry" role="listitem">
Bostrom, Nick. 2003. <span>“Are You Living in a Computer Simulation?”</span> <em>The Philosophical Quarterly</em> 53 (211): 243–55. <a href="https://doi.org/10.1111/1467-9213.00309">https://doi.org/10.1111/1467-9213.00309</a>.
</div>
<div id="ref-Elga2000-ELGSBA" class="csl-entry" role="listitem">
Elga, Adam. 2000. <span>“Self-Locating Belief and the Sleeping Beauty Problem.”</span> <em>Analysis</em> 60 (2): 143–47. <a href="https://doi.org/10.1093/analys/60.2.143">https://doi.org/10.1093/analys/60.2.143</a>.
</div>
<div id="ref-Goodman1955" class="csl-entry" role="listitem">
Goodman, Nelson. 1955. <em>Fact, Fiction and Forecast</em>. Cambridge: Harvard University Press.
</div>
<div id="ref-Lewis1979b" class="csl-entry" role="listitem">
Lewis, David. 1979. <span>“Attitudes <em>de Dicto</em> and <em>de Se</em>.”</span> <em>Philosophical Review</em> 88 (4): 513–43. <a href="https://doi.org/10.2307/2184646">https://doi.org/10.2307/2184646</a>.
</div>
<div id="ref-Quine1973" class="csl-entry" role="listitem">
Quine, W. V. O. 1973. <em>The Roots of Reference</em>. La Salle: Open Court.
</div>
<div id="ref-Williamson2000-WILSAE-2" class="csl-entry" role="listitem">
Williamson, Timothy. 2000. <span>“<span class="nocase">Scepticism and Evidence</span>.”</span> <em>Philosophy and Phenomenological Research</em> 60 (3): 613–28. <a href="https://doi.org/10.2307/2653819">https://doi.org/10.2307/2653819</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>