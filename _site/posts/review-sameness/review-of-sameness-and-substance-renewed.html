<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.479">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Weatherson">
<meta name="dcterms.date" content="2002-09-06">
<meta name="description" content="Review of David Wiggins, “Sameness and Substance Renewed”. Cambridge: Cambridge University Press, 2001.">

<title>Online Articles - Brian Weatherson - Review of “Sameness and Substance Renewed”</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="stylesheet" href="https://use.typekit.net/uzz2drx.css">


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Online Articles - Brian Weatherson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://brian.weatherson.org"> <i class="bi bi-mortarboard" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://bsky.app/profile/bweatherson.bsky.social"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Review of “Sameness and Substance Renewed”</h1>
                  <div>
        <div class="description">
          <p>Review of David Wiggins, “Sameness and Substance Renewed”. Cambridge: Cambridge University Press, 2001.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">book review</div>
                <div class="quarto-category">on books</div>
                <div class="quarto-category">metaphysics</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="http://brian.weatherson.org">Brian Weatherson</a> </p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Michigan
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 6, 2002</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="review-of-sameness-and-substance-renewed.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p><em>Sameness and Substance Renewed</em> (hereafter, 2001) is, in effect, a second edition of Wiggins’s 1980 book <em>Sameness and Substance</em> (hereafter, 1980), which in turn expanded and corrected some ideas in his 1967 <em>Identity and Spatio-Temporal Continuity</em> (hereafter, 1967). All three books have similar aims. The first is to argue, primarily against Geach, that identity is absolute not relative. The second is to argue that, despite this, whenever an identity claim <em>a</em>&nbsp;=&nbsp;<em>b</em> is true, there is a sortal <em>f</em> such that <em>a</em> is the same <em>f</em> as <em>b</em>. The biggest difference between 1967 and the two later books is that the later books contain much more detail on what a sortal must be if this claim, called <strong>D</strong>, is to be both correct and philosophically interesting. The third aim is to apply the first two conclusions to the topic of personal identity.</p>
<aside>
This review first published in <a href="https://ndpr.nd.edu/news/sameness-and-substance-renewed/">Notre Dame Philosophical Reviews</a>.
</aside>
<p>For the bulk of 2001, most of the changes to 1980 are confined to footnotes, the bulk of these consisting of a citation of, and occasionally a brief comment upon, a post 1980 publication that bears on Wiggins’s approach to the topic. This changes in the last two chapters. The penultimate chapter is a mostly new discussion of the determinacy of identity. In the final chapter, on personal identity, Wiggins retracts many of the claims made in the matching chapter of 1980, and raises some interesting objections to Parfit’s account of personal identity. Apart from those, the major changes to 1980 are stylistic. No longer is the material considered more peripheral printed in smaller type, though to make up for this there are frequent exhortations to skip these sections. And the longer notes of the 1980 edition are now mostly incorporated into the text, several prefixed with advice that they not be read.</p>
<p>In the preface Wiggins says that it is a matter of no concern whether 1980 and 2001 are the same book. But it is of concern to me, twice over. First, it makes a large difference to what kind of review should be written whether this is an old book reissued or a new book. Secondly, the difficulty in answering this question draws out some problems Wiggins’s theory faces when we try to apply it outside the realms of physics and biology. On the first problem, the reader who hopes here to find a comprehensive discussion of the literature on identity post-1980 as it strikes David Wiggins will be disappointed. Three examples should help to illustrate this.</p>
<p>In 1967 Wiggins held, quite sensibly, that a statue is not identical to the bronze that it is made of, but rather is <em>constituted</em> by that bronze. This was an important move in his response to Geach. If identity is absolute, and the statue is identical with the bronze, then we can’t say that when the statue is remoulded into a vase, we have the same lump of bronze but a different artwork. In 2001 he says much the same thing. This still seems like good common sense, but the problem is that in the intervening 34 years there has been a mass of work on constitution, most of it concluding that the constitution relation is much more problematic than we had originally thought. In a genuinely new work, or even perhaps in a revised old work, this material should have been addressed.</p>
<p>In 1980 Wiggins makes it quite clear he dislikes perdurantist theories of persistence that hold that an object persists from <em>t</em>­<sub>1</sub> to <em>t</em><sub>2</sub> by having instantaneous temporal parts at every time in [<em>t</em><sub>1</sub>, <em>t</em><sub>2</sub>]. Just why he dislikes perdurantism is unclear, since all his arguments are directed against the conjunction of this view with the striking, and not especially popular, view that our ordinary names refer to these instantaneous objects. In 2001 it is still clear he dislikes perdurantism. But we find little on the barrage of arguments perdurantists have offered in the last 21 years in support of their position. All we find is a footnote expressing agreement with Mark Johnston’s response to Lewis’s ‘problem of temporary intrinsics’ argument, and a citation of a paper expanding upon said agreement. Given that this book largely reprints previously available material, including more detail here would not have been absurd, and saying something about other arguments quite appropriate.</p>
<p>The third example is a little more serious. In the book’s new chapter, he outlines approvingly Evans’s proof that identity is always determinate identity, and cites (without outlining) a proof by Williamson that distinctness is always determinate. From these proofs he quite naturally concludes that the prospects for indeterminate identities are pretty grim. But he doesn’t engage with those who maintain that, despite all this, there really are indeterminate identities. It would have been worthwhile, for instance, to see a more direct engagement between his views and those of, say, Terrence Parsons, who over the last 15 years has developed a rather detailed theory on which indeterminate identity is possible. It will probably turn out that Wiggins’s position is entirely correct, and Parsons’s position basically mistaken, but that’s no reason to not take Parsons more seriously.</p>
<p>Apart from this oversight, there is one rather odd feature in the discussion of determinacy. Wiggins says that “it can be <em>perfectly determinate</em> which mountain <em>x</em> is without <em>x</em>’s extent being determinate.” (166) The idea is that it can be determinate that <em>x</em> is, say, this mountain, while it is indeterminate whether, say, that foothill is part of <em>x</em>. Such a position always feels strained to me, but it is certainly not unfamiliar. But it is very hard to see how it is meant to fit in with Wiggins’s picture of the role of sortal concepts, such as <em>mountain</em>. On page 70 he says a sortal concept is such that grasp of it determines “what changes <em>x</em> tolerates without there ceasing to exist such a thing as <em>x</em>.” (He actually says ‘substance-concept’, not ‘sortal concept’ there, but these phrases seem to be used synonymously.) The trouble should be apparent. For it to be determinate what <em>x</em> is, presumably just is for it to be determinate that <em>x</em> is this <em>mountain</em>. That is, it is determinate that <em>x</em> falls under the sortal <em>mountain</em>, and that sortal must determine persistence conditions, else it fails to be a sortal. But that means <em>x</em>’s persistence conditions are determined. So there is a determinate fact, perhaps unknown and perhaps even unknowable, about how far in the future one can go without leaving <em>x</em> behind. (I assume here that if <em>x</em>’s temporal extent is <em>determined</em> by which sortal it falls under, then <em>x</em>’s temporal extent is <em>determinate</em>. I imagine some will deny this claim, but it looks like a platitude to me.) On the other hand, it seems that it can be determinate what <em>x</em> is even though the conditions of <em>x</em>’s spatial persistence, conditions that determine how far westward one can go without leaving <em>x</em> behind, are not determinate. Just how this asymmetry is to be tolerated is not explained.</p>
<p>Much of the interest in this edition will focus on the new material on personal identity, and I shall say more about this below. But it is worth going over the central claims of the earlier part of the book. The crucial principle is called <strong>D</strong>(ii). The derivation of it appeals crucially to <strong>D</strong>(i). (Both definitions, and the commentary, from page 64.)</p>
<p><strong>D</strong>(i) (<em>x</em>)(<em>t</em>) [(<em>x</em> exists at <em>t</em>)&nbsp;→ (∃<em>g</em>) (<em>g</em>(<em>x</em>)&nbsp;at <em>t</em>)].</p>
<p><strong>D</strong>(ii) (<em>x</em>)(∃<em>g</em>)(<em>t</em>) [(<em>x</em> exists at <em>t</em>)&nbsp;→ (<em>g</em>(<em>x</em>)&nbsp;at <em>t</em>)].</p>
<p>‘<em>x</em>’ ranges over three-dimensional continuants, ‘<em>t</em>’ over times and ‘<em>g</em>’ over sortals. The argument for <strong>D</strong>(i) is that for any object at any time there is an answer to the Aristotelian question <em>What is it</em>? This answer is a sortal so, as just noted, it must determine principles of persistence. It must also determine “a prnciple of <em>activity</em>, a principle of <em>functioning</em> or a principle of <em>operation</em>”. (72) If the last claim looks disjunctive, that’s because it is. Sortals for living objects determine principles of activity, sortals for artifacts determine principles of functioning. Just what philosophically interesting features these principles share is never satisfactorily explained. So there’s a suspicion that there is no decent concept of <em>sortal</em> that covers the kinds of things living creatures are and the kinds of things artifacts are. In slogan form <em>sortal</em> isn’t a sortal. Two other considerations reinforce that suspicion.</p>
<p>First, there are objects that don’t naturally fall under any known sortal. Just looking at the computer I’m now using, there is the latch that holds the lid down when it’s closed, the button that opens the CD tray, the brightness control, and the stick that plays some (but not all) the functional roles of a mouse. It’s far from obvious that any of these falls under a sortal, at least if a sortal must determine persistence conditions and a principle of functioning.</p>
<p>Secondly, there’s a tension between the kinds of sortals Wiggins thinks appropriate for artifacts and what he says about persistence. Artifact sortals are, he says, functional kinds. These sortals are meant to determine persistence conditions. Whether an object has persisted is not meant to depend on extrinsic, or external, factors. This is the upshot of his <em>Only a and b</em> rule (96), which is important in ruling out ‘best deserver’ theories of persistence. That rule says that we don’t need to consider objects other than <em>a</em> or <em>b</em> to determine whether <em>a</em> is <em>b</em>. So whether <em>a</em>, the boy genius is <em>b</em>, the Nobel Prize winning author, cannot depend on the existence or otherwise of a person more closely continuous with <em>a</em> than <em>b</em> happens to be. Hence Nozick’s theory of personal identity, which rejects this, cannot be true. But to determine whether <em>a</em>´, the brightness control on my computer at <em>t</em><sub>1</sub> is <em>b</em>´, the volume control on Jack’s computer at <em>t</em><sub>2</sub>, we need to see which sortals <em>a</em>´ and <em>b</em>´ fall under, to see whether <em>a</em>´ has persisted. That will depend, in part, on whether <em>a</em>´ still falls under that sortal, whatever it is. Such a sortal will sort by functional role, and whether that functional role is fulfilled at all times between <em>t</em><sub>1</sub> and <em>t</em><sub>2</sub> will be determined by things other than <em>a</em>´ and <em>b</em>´. The point generalises: in most cases whether an object continues to fill a functional role often turns on the existence, and behaviour, of <em>other</em> objects. The natural conclusion to be drawn here is that <strong>D</strong>(i) might be false for artifacts.</p>
<p>Clearly <strong>D</strong>(i) doesn’t entail <strong>D</strong>(ii). But, bracketing our concerns about its truth, it might still be usable in an abductive argument for <strong>D</strong>(ii). Wiggins does just this. The argument, and this is I think the <em>only</em> argument for <strong>D</strong>(ii), is that it best explains our widespread agreement over whether an object has survived. Wiggins says that, “Our capacity for massive agreement about this is much more remarkable than our occasional disagreement,” (66) and given <strong>D</strong>(i), <strong>D</strong>(ii) is the best explanation of this. Two replies. First, the agreement is not all that widespread, even in actual cases. Think, for example, about the range of disagreement over whether a corpse is a thing that once lived, and hence the disagreement over whether Auntie is buried behind the back shed, or Auntie no longer exists. Secondly, there is a better explanation – the perdurantist explanation given by Lewis. This not only explains why there is agreement just where there is agreement, but why there is disagreement where there is disagreement. The story is familiar. All sorts of continuants (fusions of temporal parts) exist, but we choose which ones to refer to and quantify over because of our particular interests, and those choices are codified in our linguistic practices. When dealing with historically familiar situations, membership of linguistic, and more broadly cultural, communities commits us to common answers. Since most situations are historically familiar, we have agreement in most cases. When we deal with new cases, either generated by new technology or new imaginativeness, and our interests do not pick out a clearly preferable continuant, we do not have agreement. If this is right, we will agree about the familiar and disagree about the unfamiliar. Happily, this is exactly what we find – we all know what the persistence conditions for cows, pigs and chicken are, we do not know the persistence conditions for corporate entities or pieces of software or even relocated football teams in perfectly everyday cases.</p>
<p>In 1980, the chapter on personal identity had two main aims. The first was to argue that Lockean considerations about continuity of memory could be used in an account of personal identity, even if they would have to be used as reference fixers rather than as constituents of a reductive analysis. The opponents here were those followers of Bishop Butler, most prominently Anthony Flew, who held that any such consideration would be hopelessly circular. The second aim was to argue that it is a conceptual truth that persons are animals. The targets here were (unnamed) philosophers who wanted to provide a complete functional analysis of a person. The objections were mainly political but since it is unclear whether the philosophy of personal identity should be part of metaphysics or ethics, that’s perfectly acceptable.</p>
<p>In 2001, the aims have changed. Wiggins retracts everything he said against Butler and Flew, and then spends most of the chapter in a lengthy discussion of Parfit’s theory of personal identity. Butler’s original complaint against Locke was that the concept of memory needs a pre-existing concept of personal identity to be applied so it cannot be used in a non-circular account of identity. In the bluntest version of this complaint, it is held that ‘A remembers X-ing’ is properly represented as ‘A remembers A X-ing’, which requires an identity between the referents of the two occurences of ‘A’. Wiggins’s complaint, in 1980, was that this position costs us some vital distinctions. We want to distinguish, for example, ‘A imagines being an elephant’ from ‘A imagines A being an elephant’. In the first case only, A imagines something possible. And what holds for imagining, he thought, holds for remembering. Wiggins now rejects the last step here. Remembering, unlike imagining, has a tie to the truth. A can only remember X-ing if A in fact X-ed.&nbsp;This last claim might not be part of the logical form of ‘A remembers X-ing’, but there is a close relation between the two. Wiggins calls the relationship presupposition, but the name here doesn’t matter much. So Butler, and Flew, were right – appeals to memory in a theory of personal identity are hopelessly circular, because they presuppose that debates about identity through time are resolved.</p>
<p>The rest of the chapter outlines concerns with Parfit’s theory of personal identity, based on his concept of quasi-memory, and with the intuitions behind some cases that support Parfit’s theory. Quasi-memory, unlike memory, need not be factive, but what is quasi-remembered must have happened somewhere, to someone. Wiggins launches a barrage of attacks on this idea, of which the following three seem most telling. First, quasi-memory could not be defined (and is not defined) as memory minus factiveness, because conceptual subtraction is undefined in the absence of conceptual analysis, and we don’t have a conceptual analysis here. Secondly, the concept of quasi-memory may seem to make sense for quite general, <em>de dicto</em> memories, but it runs into trouble with <em>de re</em>, or even with more specific memories. If I am to quasi-remember climbing Big Ben on my sixteenth birthday, must someone have climbed Big Ben on my sixteenth birthday? Or perhaps on their sixteenth birthday? Thirdly, even if Parfit can define the concept of <em>accurate quasi-memory</em>, that won’t get us the general concept of quasi-memory, because again conceptual subtraction doesn’t make sense.</p>
<p>There are some good points here for followers of Parfit to consider. They are followed by some interesting considerations about why we might rethink our intuitions about personal identity in cases involving brain swaps. Those interested in personal identity debates, and particularly Wiggins’s and Parfit’s contributions, should pay close attention here. These will not be the only people to whom this new volume has interest. <em>Sameness and Substance</em> was an important statement of a rather commonsensical solution to some of the hardest questions in metaphysics, a solution with which everyone working in the field should be well acquainted. And those who have not previously read it closely will find that the stylistic changes (having a uniform font size, incorporating the longer notes into the text) make the renewed version of <em>Sameness and Substance</em> much more accessible than the original.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>