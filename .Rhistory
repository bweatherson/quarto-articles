"\n\n",
"year_cites <- rank_table_generator(year)\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
".",
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
}
# Spaghetti Graph
the_code <- c(the_code,
"\n## Citation Frequencies over Time {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
rolling_spaghetti_graph(year)
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: tbl-recent-journals-in-main-bib
#| tbl-cap: Which journals the most recent 90 articles appeared in.
kable(
main_bib |>
filter(old_year >= 2006) |>
group_by(journal) |>
tally(name = "Articles") |>
arrange(-Articles) |>
rename(Journal = journal)
)
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
".",
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Spaghetti Graph
the_code <- c(the_code,
"\n## Citation Frequencies over Time {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
}
rolling_spaghetti_graph(year)
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
".",
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Spaghetti Graph
the_code <- c(the_code,
"\n## Citation Frequencies over Time {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
".",
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Spaghetti Graph
the_code <- c(the_code,
"\n## Citation Trends {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: loader
#| cache: false
require(tidyverse)
require(slider)
require(stringr)
require(knitr)
# Graph Themes
old <- theme_set(theme_minimal())
theme_set(old)
theme_update(plot.title = element_text(family = "Scala Sans Pro", size = 16),
plot.subtitle = element_text(family = "Scala Sans Pro", size = 14),
axis.text = element_text(family = "Scala Sans Pro", size = 12),
plot.background = element_rect(fill = "white"),
panel.background = element_rect(fill = "white"),
panel.grid = element_line(color = "grey92"),
legend.text = element_text(family = "Scala Sans Pro", size = 14),
strip.text = element_text(family = "Scala Sans Pro", size = 14)
)
# Find ranks for a given year
rank_table_generator <- function(year){
year_cites <- citation_tibble |>
filter(old_year == year) |>
group_by(old) |>
tally(name = "all") |>
ungroup() |>
left_join (citation_tibble |>
filter(old_year == year, new_year >= 2013) |>
group_by(old) |>
tally(name = "late") |>
ungroup(),
by = "old") |>
left_join (citation_tibble |>
filter(old_year == year, new_year <= year + 10) |>
group_by(old) |>
tally(name = "early") |>
ungroup(),
by = "old") |>
mutate(early = replace_na(early, 0)) |>
mutate(late = replace_na(late, 0))
year_cites |>
add_column(all_rank = min_rank(-year_cites$all)) |>
add_column(early_rank = min_rank(-year_cites$early)) |>
add_column(late_rank = min_rank(-year_cites$late)) |>
filter(old %in% main_bib$old) |>
left_join(main_bib, by = "old") |>
select(Article = short_auth, `Citations` = all, `Citation Rank` = all_rank, `Early Citations` = early, `Early Rank` = early_rank, `Late Citations` = late, `Late Rank` =late_rank) |>
arrange(-Citations)
}
#| label: fig-number-of-articles-by-year
#| fig-cap: "Number of articles in the study each year"
philo_bib |>
group_by(year) |>
filter(year >= 1976, year <= 2022) |>
tally() |>
ggplot(aes(x = year, y = n)) +
geom_line() +
labs(x = element_blank(),
y = element_blank(),
title = "Number of Articles in Database Each Year") +
scale_x_continuous(breaks = 197:202 * 10, minor_breaks = 393:404*5)
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:1978){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n## Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n## Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
".",
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
"\n\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Spaghetti Graph
the_code <- c(the_code,
"\n## Citation Trends {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
}
cat(the_code, sep = "", file = "_section-2.qmd")
#| label: loader
#| cache: false
require(tidyverse)
require(slider)
require(stringr)
require(knitr)
# Graph Themes
old <- theme_set(theme_minimal())
theme_set(old)
theme_update(plot.title = element_text(family = "Scala Sans Pro", size = 24, face = "bold"),
plot.subtitle = element_text(family = "Scala Sans Pro", size = 20),
axis.text = element_text(family = "Scala Sans Pro", size = 18),
plot.background = element_rect(fill = "white"),
panel.background = element_rect(fill = "white"),
panel.grid = element_line(color = "grey92"),
legend.text = element_text(family = "Scala Sans Pro", size = 20),
strip.text = element_text(family = "Scala Sans Pro", size = 20),
legend.spacing.y = unit(2, 'cm')
)
# Find ranks for a given year
rank_table_generator <- function(year){
year_cites <- citation_tibble |>
filter(old_year == year) |>
group_by(old) |>
tally(name = "all") |>
ungroup() |>
left_join (citation_tibble |>
filter(old_year == year, new_year >= 2013) |>
group_by(old) |>
tally(name = "late") |>
ungroup(),
by = "old") |>
left_join (citation_tibble |>
filter(old_year == year, new_year <= year + 10) |>
group_by(old) |>
tally(name = "early") |>
ungroup(),
by = "old") |>
mutate(early = replace_na(early, 0)) |>
mutate(late = replace_na(late, 0))
year_cites |>
add_column(all_rank = min_rank(-year_cites$all)) |>
add_column(early_rank = min_rank(-year_cites$early)) |>
add_column(late_rank = min_rank(-year_cites$late)) |>
filter(old %in% main_bib$old) |>
left_join(main_bib, by = "old") |>
select(Article = short_auth, `Citations` = all, `Citation Rank` = all_rank, `Early Citations` = early, `Early Rank` = early_rank, `Late Citations` = late, `Late Rank` =late_rank) |>
arrange(-Citations)
}
rolling_spaghetti_graph(1977)
