str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] -1
),
" and ",
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][5] + 1,
end = str_length(graph_auth)
)
),
spaces_in_auth == 4 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] -1
),
" and ",
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][4] + 1,
end = str_length(graph_auth)
)
),
spaces_in_auth == 3 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] - 2
),
" et al"
),
graph_auth == 'Gaile Pohlhaus Jr.' ~ 'Pohlhaus Jr.',
spaces_in_auth == 2 ~
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][2] + 1,
end = str_length(graph_auth)
),
TRUE ~  str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_length(graph_auth)
)
)) |>
mutate(short_auth = case_when(
art_title == "Is Conceivability A Guide To Possibility" ~ "Yablo, Conceivability",
art_title == "Paradox Without Self-Reference" ~ "Yablo, Paradox",
art_title == "What Is Equality .2. Equality Of Resources" ~ "Dworkin Pt. 2",
art_title == "What Is Equality .1. Equality Of Welfare" ~ "Dworkin Pt. 1",
art_title == "In Defense Of Proper Functions" ~ "Millikan, Proper Function",
art_title == "Biosemantics" ~ "Millikan, Biosemantics",
art_title == "Concepts Of Supervenience" ~ "Kim, Concepts",
art_title == "Epiphenomenal And Supervenient Causation" ~ "Kim, Epiphenomenal",
art_title == "Probabilities Of Conditionals And Conditional Probabilities" ~ "Lewis, Probabilities",
art_title == "Paradoxes Of Time Travel" ~ "Lewis, Time Travel",
art_title == "Attitudes De-Dicto And De-Se" ~ "Lewis, De Se",
art_title == "Counterfactual Dependence And Times Arrow" ~ "Lewis, Time\'s Arrow",
art_title == "Scorekeeping In A Language Game" ~ "Lewis, Scorekeeping",
short_auth == "Rabinowicz and Ronnow-Rasmussen" ~ "R and R-R",
TRUE ~ short_auth
)) |>
left_join(select(philo_bib, id, longcite), by = c("old" = "id")) |>
rowwise() |>
mutate(end_of_longcite = str_sub(longcite, str_length(longcite)-35, str_length(longcite)-5)) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[a-z]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[A-Z]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[,.?]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^:", "")) |>
mutate(end_of_longcite = str_squish(end_of_longcite)) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^:", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^\\)", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^\\&", "")) |>
mutate(end_of_longcite = str_squish(end_of_longcite)) |>
select(end_of_longcite, everything()) |>
ungroup()
rolling_averages <- citation_tibble |>
filter(old %in% main_bib$old) |>
group_by(old, new_year) |>
tally(name = "cites") |>
ungroup() |>
complete(old, new_year, fill = list(cites = 0)) |>
filter(new_year <= 2022) |>
ungroup() |>
group_by(old) |>
arrange(old, new_year) |>
mutate(rolling = slider::slide_dbl(cites, mean, .before = 4)) |>
left_join(main_bib, by = "old") |>
select(old, old_year, new_year, cites, rolling, graph_cite, short_auth)
# List of cleanup on bibliographic information
# - [ ] 196 (Fodor 1997) needs new journal and pages
# - [ ] 210 (Sosa 1999) needs new journal and pages
# - [ ] 214 (Cohen 1999) needs new journal and pages
# - [ ] 239 (Wedgwood 2002)
# - [ ] 254 just needs trailing dash removed
# - [ ] 256 (Pryor 2004)
# - [ ] 258 just needs trailing dash removed
# - [ ] 321 Add page numbers
# - [ ] 335 Add page numbers
# - [ ] 338 remove trailing 1
# - [ ] 343 remove trailing 2
# - [ ] 356 pages
main_bib <- main_bib |>
mutate(full_citation = paste0(graph_cite, " _", journal, "_ ", end_of_longcite,"."))
View(main_bib)
#| label: setup
#| cache: true
load("philo_bib.RData")
load("philo_cite.RData")
authadjust <- function(x){
paste0(str_extract(x, '\\b[^,]+$'), " ", str_to_title(str_extract(x,".+(?=,)")))
}
article_years <- philo_bib |>
as_tibble() |>
select(id, year)
article_title <- philo_bib |>
as_tibble() |>
select(id, author, art_title, journal)
citation_tibble <- philo_cite |>
as_tibble() |>
rename(new = id, old = refs) |>
left_join(article_years, by = c("old" = "id")) |>
rename(old_year = year)  |>
left_join(article_years, by = c("new" = "id")) |>
rename(new_year = year)
main_article_ids <- c()
for(year in (1976:2015)){
topper <- 1
all_cited <- tribble(~old, ~n)
while(nrow(all_cited) < 9){
most_cited <- citation_tibble |>
filter(old_year == year) |>
group_by(old) |>
tally() |>
ungroup() |>
slice_max(n, n=topper)
recent_cited <- citation_tibble |>
filter(old_year == year, new_year >= 2013) |>
group_by(old) |>
tally() |>
ungroup() |>
slice_max(n, n=topper)
orig_cited <- citation_tibble |>
filter(old_year == year, new_year <= year + 10) |>
group_by(old) |>
tally() |>
ungroup() |>
slice_max(n, n=topper)
all_cited <- bind_rows(most_cited, recent_cited, orig_cited) |>
distinct(old, .keep_all = TRUE) |>
mutate(old_year = year)
topper <- topper + 1
}
main_article_ids <- bind_rows(
main_article_ids,
slice_max(all_cited, n, n=9, with_ties = FALSE)
)
}
main_bib <- main_article_ids |>
left_join(article_title, by = c("old" = "id")) |>
ungroup() |>
rowwise() |>
mutate(graph_auth =  case_when(author[1] == "Pohlhaus, Gaile, Jr." ~ "Gaile Pohlhaus Jr.",
length(author) == 1 ~ authadjust(author[1]),
length(author) == 2 ~ paste0(authadjust(author[1]), " and ", authadjust(author[2])),
TRUE ~ paste0(authadjust(author[1]), ", et al"))) |>
mutate(graph_auth = str_replace_all(
graph_auth,
c(
'Bonjour' = 'BonJour',
'Mcdowell' = 'McDowell',
'Mcmullin' = 'McMullin',
'Mcgee' = 'McGee',
'Wedgewood' = 'Wedgwood',
'Mcginn' = 'McGinn',
'Mcgrath' = 'McGrath',
'Mckinsey' = 'McKinsey',
'Macfarlane' = 'MacFarlane',
'Castaneda' = 'Castañeda',
'Hajek' = 'Hájek',
'Vaninwagen' = 'van Inwagen',
'Vanfraassen' = 'van Fraassen',
'D\'arms' = 'D\'Arms',
'Godfreysmith' = 'Godfrey-Smith',
'Vangelder' = 'van Gelder',
'Derosset' = 'deRosset'
)
)) |>
mutate(graph_cite = paste0(
graph_auth,
", \"",
art_title,
"\""
)) |>
mutate(journal = str_replace_all(journal, 'Nous', 'Noûs')) |>
mutate(graph_cite = str_replace_all(
graph_cite,
c(
' A ' = ' a ',
' And ' = ' and ',
' The ' = ' the ',
' Or ' = ' or ',
' As ' = ' as ',
' Of ' = ' of ',
' On ' = ' on ',
' In ' = ' in ',
' For ' = ' for ',
' Is ' = ' is ',
'Decision-Theory' = 'Decision Theory',
'Modern-History' = 'Modern History',
'Times Arrow' = 'Time\'s Arrow',
'Derosset' = 'deRosset',
'Macfarlane' = 'MacFarlane',
'Norms Of Assertion (Knowledge Norm Of Assertion, Kna)' = 'Norms of Assertion',
'Derose' = 'DeRose',
'Mcgrath' = 'McGrath',
'Trust? (Epistemic Considerations)' = 'Trust?',
'D\'arms' = 'D\'Arms',
'Dimensionalism (Persistence Through Time, Doctrine Of Temporal Parts, Perdurance)' = 'Dimensionalism',
'Frankfurt Attack on the Principle-Of-Alternative-Possibilities' = 'Frankfurt\'s Attack on the Principle of Alternative Possibilities',
'Chance And Credence - Humean Supervenience Debugged' = 'Humean Supervenience Debugged',
'Mckinsey' = 'McKinsey',
'2 Modelings ' = 'Two Modelings ',
'Moral Realism + A Form Of Ethical Naturalism' = 'Moral Realism',
'Actualism + The Exploration And Defense Of Actualism' = 'Actualism',
'Mcgee' = 'McGee',
'Vanfraassen' = 'van Fraassen',
'Putnam Paradox' = 'Putnam\'s Paradox',
'2 Distinctions' = 'Two Distinctions',
'3 Theses' = 'Three Theses',
'2 Notions' = 'Two Notions',
'Godfreysmith' = 'Godfrey-Smith',
'2 Concepts' = 'Two Concepts',
'2 Kinds' = 'Two Kinds',
'2 Types' = 'Two Types',
'Mcdowell' = 'McDowell',
'1st' = 'First',
'G.e. Moore' = 'G.E. Moore',
'To-Be' = 'To Be',
'De-Dicto' = 'De Dicto',
'De-Se' = 'De Se',
'Problem of Action' = 'The Problem of Action',
'Matter of Individuality' = 'A Matter of Individuality',
'Logic of Paradox' = 'The Logic of Paradox',
'Problem of the Essential' = 'The Problem of the Essential',
'and a Ariew' = 'and A Ariew'
)
)) |>
mutate(graph_cite = str_replace_all(
graph_cite,
fixed(
c(
'Have a Foundation' = 'Have a Foundation?',
'Materialism and Qualia, the Explanatory Gap' = 'Materialism and Qualia: The Explanatory Gap',
'Saints + Implications for Moral-Philosophy' = 'Saints',
'All the Worlds a Stage + a Philosophers Reasons To Believe the Stage-View' = 'All the World\'s a Stage',
'Stalking the Wild Epistemic Engine + Computational Psychology and Cognition' = 'Stalking The Wild Epistemic Engine',
'Structures of Normative Theories + Addressing the Agent-Neutral and Agent-Centered Distinctions as Substantive Mistakes in Moral Theorizing' = 'Structures of Normative Theories',
'Moral Realism + a Form of Ethical Naturalism' = 'Moral Realism',
'Oughts, Options, and Actualism + the Exploration and Defense of Actualism' = 'Oughts, Options, and Actualism',
'Sense, Nonsense and the Senses, An Inquiry Into the Powers of the Human Mind + 1994 Dewey Lectures At Columbia-University, Lecture 1 - the Antinomy of Reason' = 'Sense, Nonsense, and the Senses: An Inquiry into the Powers of the Human Mind',
'Finkish Dispositions + Refutation of Simple Conditional Analysis' = 'Finkish Dispositions',
'Four-Dimensionalism (Persistence Through Time, Doctrine of Temporal Parts, Perdurance)' = 'Four-Dimensionalism',
'The Extended Mind (Active Externalism)' = 'The Extended Mind',
'Brutal Composition (Objects, Vagueness, Ontology)' = 'Brutal Composition',
'Consciousness The Transmutation Of A Concept' = 'Consciousness: The Transmutation Of A Concept',
'Dispositions and Antidotes (Reply To David Lewis)' = 'Dispositions and Antidotes',
'Nonexistence (Singular Negative Existentials)' = 'Nonexistence',
'Is Coherence Truth Conducive? (Belief)' = 'Is Coherence Truth Conducive?',
'Is There A Fundamental Level? (Reality, Metaphysics, Ontology)' = 'Is There A Fundamental Level?',
'Emotions (Ethics, Propriety, Correctness)' = 'Emotions',
'Antidotes (Reply To David Lewis)' = 'Antidotes',
'Mind (Active Externalism)' = 'Mind',
'Clay (Problem in Philosophy, Ontology)' = 'Clay',
' (Properties, Philosophy)' = '',
' (Rationality, Correct Reasoning)' = '',
' (A Philosophical Consideration on Propositional Definitions of Acquired Knowing)' = '',
' (Epistemic Considerations)' = '',
'G.e. Moore And John Mcdowell' = 'G.E. Moore and John McDowell',
' (Epistemic Warrant)' = '',
' (Reality, Metaphysics, Ontology)' = '',
' (Knowledge Norm of Assertion, Kna)' = '',
' (Keith Lehrer)' = '',
'Best Explanation - Criteria for Theory Choice' = 'The Best Explanation: Criteria for Theory Choice',
'What is Equality .1. Equality of Welfare' = 'What is Equality? Part 1: Equality of Welfare',
'What is Equality .2. Equality of Resources' = 'What is Equality? Part 2: Equality of Resources',
'Fallacy: on' = 'Fallacy: On',
'Chance and Credence - Humean Supervenience Debugged' = 'Humean Supervenience Debugged',
'The Rule-Following Considerations .5.' = 'The Rule-Following Considerations',
' - ' = ': ',
': a' = ': A',
': the' = ': The',
': on' = ': On'
)
)
)
) |>
mutate(graph_auth = str_replace_all(
graph_auth,
c(
'J. S.' = 'J.S.'
)
)) |>
mutate(spaces_in_auth = str_count(graph_auth, " ")) |>
rowwise() |>
mutate(short_auth = case_when(
spaces_in_auth == 6 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][2] + 1,
end = str_locate_all(graph_auth, " ")[[1]][3] -1
),
" and ",
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][6] + 1,
end = str_length(graph_auth)
)
),
spaces_in_auth == 5 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] -1
),
" and ",
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][5] + 1,
end = str_length(graph_auth)
)
),
spaces_in_auth == 4 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] -1
),
" and ",
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][4] + 1,
end = str_length(graph_auth)
)
),
spaces_in_auth == 3 ~
paste0(
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_locate_all(graph_auth, " ")[[1]][2] - 2
),
" et al"
),
graph_auth == 'Gaile Pohlhaus Jr.' ~ 'Pohlhaus Jr.',
spaces_in_auth == 2 ~
str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][2] + 1,
end = str_length(graph_auth)
),
TRUE ~  str_sub(
graph_auth,
start = str_locate_all(graph_auth, " ")[[1]][1] + 1,
end = str_length(graph_auth)
)
)) |>
mutate(short_auth = case_when(
art_title == "Is Conceivability A Guide To Possibility" ~ "Yablo, Conceivability",
art_title == "Paradox Without Self-Reference" ~ "Yablo, Paradox",
art_title == "What Is Equality .2. Equality Of Resources" ~ "Dworkin Pt. 2",
art_title == "What Is Equality .1. Equality Of Welfare" ~ "Dworkin Pt. 1",
art_title == "In Defense Of Proper Functions" ~ "Millikan, Proper Function",
art_title == "Biosemantics" ~ "Millikan, Biosemantics",
art_title == "Concepts Of Supervenience" ~ "Kim, Concepts",
art_title == "Epiphenomenal And Supervenient Causation" ~ "Kim, Epiphenomenal",
art_title == "Probabilities Of Conditionals And Conditional Probabilities" ~ "Lewis, Probabilities",
art_title == "Paradoxes Of Time Travel" ~ "Lewis, Time Travel",
art_title == "Attitudes De-Dicto And De-Se" ~ "Lewis, De Se",
art_title == "Counterfactual Dependence And Times Arrow" ~ "Lewis, Time\'s Arrow",
art_title == "Scorekeeping In A Language Game" ~ "Lewis, Scorekeeping",
short_auth == "Rabinowicz and Ronnow-Rasmussen" ~ "R and R-R",
short_auth == "Inwagen" ~ "van Inwagen",
TRUE ~ short_auth
)) |>
left_join(select(philo_bib, id, longcite), by = c("old" = "id")) |>
rowwise() |>
mutate(end_of_longcite = str_sub(longcite, str_length(longcite)-35, str_length(longcite)-5)) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[a-z]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[A-Z]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "[,.?]", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^:", "")) |>
mutate(end_of_longcite = str_squish(end_of_longcite)) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^:", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^\\)", "")) |>
mutate(end_of_longcite = str_replace_all(end_of_longcite, "^\\&", "")) |>
mutate(end_of_longcite = str_squish(end_of_longcite)) |>
select(end_of_longcite, everything()) |>
ungroup()
rolling_averages <- citation_tibble |>
filter(old %in% main_bib$old) |>
group_by(old, new_year) |>
tally(name = "cites") |>
ungroup() |>
complete(old, new_year, fill = list(cites = 0)) |>
filter(new_year <= 2022) |>
ungroup() |>
group_by(old) |>
arrange(old, new_year) |>
mutate(rolling = slider::slide_dbl(cites, mean, .before = 4)) |>
left_join(main_bib, by = "old") |>
select(old, old_year, new_year, cites, rolling, graph_cite, short_auth)
# List of cleanup on bibliographic information
# - [ ] 196 (Fodor 1997) needs new journal and pages
# - [ ] 210 (Sosa 1999) needs new journal and pages
# - [ ] 214 (Cohen 1999) needs new journal and pages
# - [ ] 239 (Wedgwood 2002)
# - [ ] 254 just needs trailing dash removed
# - [ ] 256 (Pryor 2004)
# - [ ] 258 just needs trailing dash removed
# - [ ] 321 Add page numbers
# - [ ] 335 Add page numbers
# - [ ] 338 remove trailing 1
# - [ ] 343 remove trailing 2
# - [ ] 356 pages
main_bib <- main_bib |>
mutate(full_citation = paste0(graph_cite, " _", journal, "_ ", end_of_longcite,"."))
View(main_bib)
#| label: this-cannot-work
# Note: Run this fragment before rendering document
setwd("~/Documents/quarto-articles/posts/citations-raw-data")
the_code <- c()
for (year in 1976:2015){
# Widely Cited Articles subsection
the_code <- c(the_code,
"\n## ",
year,
"\n\n### Widely Cited Articles {-}\n\n")
temp <- filter(main_bib, old_year == year) |> rename(Articles = full_citation) |> select(Articles)
for (i in 1:9){
the_code <- c(the_code, i, ". ", temp$Articles[i], "\n")
}
# Citation Count Section
the_code <- c(the_code,
"\n### Citation Count {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-count-",
year,
"\n",
"#| tbl-cap: Citation count for widely cited articles from ",
year,
".",
"\n\n",
"year_cites <- rank_table_generator(",year,")\n",
"kable(select(year_cites, Article, All = Citations, Early = \`Early Citations\`, Late = \`Late Citations\`))\n",
"\`\`\`",
"\n\n")
# Citation Rank Section
the_code <- c(the_code,
"\n### Citation Rank {-}\n\n",
"\`\`\`{r}\n",
"#| label: tbl-citation-rank-",
year,
"\n",
"#| tbl-cap: Citation rank for widely cited articles from ",
year,
".",
"\n\n",
"kable(select(year_cites, Article, Overall = \`Citation Rank\`, Early = \`Early Rank\`, Late = \`Late Rank\`))\n",
"\`\`\`",
"\n\n")
# Spaghetti Graph
the_code <- c(the_code,
"\n### Citation Trends {-}\n\n",
"\`\`\`{r}\n",
"#| label: fig-citation-spaghetti-",
year,
"\n",
"#| fig-cap: Rolling five year average of citation frequency for widely cited articles from ",
year,
".",
"\n\n",
"rolling_spaghetti_graph(",
year,
")\n",
"\`\`\`",
"\n\n"
)
# Facet Graph
the_code <- c(the_code,
"\`\`\`{r}\n",
"#| label: fig-citation-facet-",
year,
"\n",
"#| fig-cap: Faceted version of @fig-citation-spaghetti-",
year,
".",
"\n\n",
"rolling_facet_graph(",
year,
")\n",
"\`\`\`",
"\n\n\\newpage\n\n"
)
}
cat(the_code, sep = "", file = "_section-2.qmd")
